train %>%
group_by(Age) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 50, stat = "bin")
train %>%
group_by(Age) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 25, stat = "bin")
train %>%
group_by(Age) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 10, stat = "bin")
train %>%
group_by(Age) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 20, stat = "bin")
train %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 20, stat = "bin")
train %>%
filter(Age < 1)
train %>%
filter(Age < 0)
train %>%
filter(Age < 1)
train %>%
select(Name) %>%
filter(Age < 1)
train %>%
filter(Age < 1) %>%
select(Name)
train %>%
filter(Age < 1) %>%
select(Name, Age)
train %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 20, stat = "bin")
train %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 20, stat = "bin")
train %>%
filter(Age < 1) %>%
select(Name, Age)
train %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), bins = 20, stat = "bin")
train %>%
filter(Age < 1) %>%
select(Name, Age)
train %>%
filter(Age < 1) %>%
select(Name, Age, Survived)
train %>%
filter(Age = na)
train %>%
filter(Age == na)
train %>%
filter(Age == NA)
train %>%
filter(Age == "NULL")
train %>%
group_by(Age) %>%
summarise(total_values = n())
train %>%
filter(Age == "NA")
train %>%
filter(Age == NA)
train %>%
filter(Age is NA)
train %>%
filter(Age is.na)
train %>%
filter(is.na(Age))
train %>%
group_by(Embarked, Survived) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_bar(mapping = aes(x = Embarked, y = total_values, fill = Survived), stat = "identity")
train %>%
group_by(Embarked, Survived) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_bar(mapping = aes(x = Embarked, y = total_values, fill = Survived), stat = "identity") +
scale_color_brewer(palette = "Set1")
train %>%
group_by(Embarked, Survived) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_bar(mapping = aes(x = Embarked, y = total_values, fill = Survived), stat = "identity") +
scale_fill_brewer(palette = "Set1")
train %>%
group_by(Name) %>%
summarise(total_values = n()) %>%
filter(total_values > 1)
train %>%
select(Name)
train %>%
select(Name) %>%
str_split(pattern = ",")
train %>%
select(Name)
train %>%
separate(Name,c("LastName","Remaining"), ", ", extra = "merge")
train %>%
separate(Name,c("LastName","Remaining"), ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames") ". ", extra = "merge")
train %>%
separate(Name,c("LastName","Remaining"), ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), ". ", extra = "merge")
train %>%
separate(Name,c("LastName","Remaining"), ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), ". ", extra = "merge") %>%
distinct(Title)
train %>%
separate(Name,c("LastName","Remaining"), ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), ". ", extra = "merge") %>%
filter(Title = "th")
train %>%
separate(Name,c("LastName","Remaining"), ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), ". ", extra = "merge") %>%
filter(Title == "th")
train %>%
filter(PassangerId == 760)
train %>%
filter(PassengerId == 760)
train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge") %>%
filter(Title == "th")
train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge")
train %>%
filter(PassengerId == 760)
train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge")
train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge") %>%
group_by(Title) %>%
summarise(total_values = n()) %>%
ggplot() +
geom_bar(mapping = aes(x = Title, y = total_values), stat = "identity")
##################
# Data Decisions #
##################
# Create an additional field for passenger title
train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge")
# Check working directory set correctly
getwd()
# Check working directory set correctly
#getwd()
setwd("C:\\Users\\will.kent\\source\\repos\\R\\Machine Learning\\Kaggle\\Titanic")
# Read csv's
train <- read.csv(".\\Data\\train.csv")
test <- read.csv(".\\Data\\test.csv")
train <- train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge")
library(tidyverse)
train <- train %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge")
train
train %>%
distinct(age)
distinct(train$age)
distinct(train,age)
train,age
train$age
train
train$Age
train %>%
filter(Age == "NA")
train %>%
filter(Age == NA)
train %>%
filter(is.na(Age))
train %>%
filter(!is.na(Age))
train %>%
filter(!is.na(Age)) %>%
group_by(Title) %>%
summarise(mean(Age))
##################
# Data Wrangling #
##################
train %>%
distinct(Name)
# Read csv's
train <- read.csv(".\\Data\\train.csv")
##################
# Data Wrangling #
##################
train %>%
distinct(Name)
## Age
train %>%
filter(!is.na(Age)) %>%
summarise(mean(Age))
View(train)
## Age
train %>%
filter(!is.na(Age)) %>%
group_by(Sex) %>%
summarise(mean(Age))
train %>%
filter(!is.na(Age)) %>%
group_by(PClass) %>%
summarise(mean(Age))
train %>%
filter(!is.na(Age)) %>%
group_by(Pclass) %>%
summarise(mean(Age))
train %>%
filter(!is.na(Age)) %>%
group_by(Embarked) %>%
summarise(mean(Age))
train %>%
filter(!is.na(Age)) %>%
group_by(Survived) %>%
summarise(mean(Age))
train %>%
filter(!is.na(Age)) %>%
group_by(Sex, Survived) %>%
summarise(mean(Age))
train %>%
filter(is.na(Age))
train %>%
filter(is.na(Age))
ggplot(train) +
geom_histogram(mapping = aes(x = Age, bins = 30))
ggplot(train) +
geom_histogram(mapping = aes(x = Age), binwidth = 30)
ggplot(train) +
geom_histogram(mapping = aes(x = Age), binwidth = 5)
ggplot(train) +
geom_histogram(mapping = aes(x = Age), binwidth = 2)
ggplot(train) +
geom_histogram(mapping = aes(x = Age), binwidth = 3)
ggplot(train) +
geom_histogram(mapping = aes(x = Age), binwidth = 3) +
ggtitle("Age distribution of passengers")
train %>%
filter(is.na(Age))
train %>%
filter(is.na(Age)) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), binwidth = 3) +
ggtitle("Age distribution of passengers")
train %>%
filter(!is.na(Age)) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), binwidth = 3) +
ggtitle("Age distribution of passengers")
## Ticket
train %>%
group_by(Ticket)
## Ticket
train %>%
group_by(Ticket) %>%
summarise(n)
## Ticket
train %>%
group_by(Ticket) %>%
summarise(n())
## Ticket
train %>%
group_by(Ticket) %>%
summarise(n() "count")
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n())
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n()) %>%
order_by(count)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n()) %>%
order_by("count")
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n()) %>%
order_by(Ticket)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n())
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n()) %>%
desc(count)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("count" = n()) %>%
order_by(desc(count))
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
order_by(desc(total))
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
order_by(total)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
order_by(total,)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
arrange(total)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
arrange(desc(total))
train %>%
filter(Ticket == "1601")
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
arrange(desc(total))
train %>%
filter(Ticket %in% c("1601", "347082"))
train %>%
filter(Ticket %in% c("1601", "347082")) %>%
arrange(Ticket)
## Ticket
train %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
arrange(desc(total))
train %>%
filter(Ticket %in% c("1601", "347082", "CA. 2343")) %>%
arrange(Ticket)
train %>%
filter(Ticket like "CA%")
train %>%
filter(Ticket %like% "CA%")
train %>%
filter(Ticket %in% "CA%")
train %>%
filter(Ticket starts_with("CA"))
train %>%
select(Ticket)
train %>%
select(Ticket) %>%
starts_with("CA")
train %>%
filter(Ticket, starts_with("CA"))
train %>%
filter(Ticket == starts_with("CA"))
train %>%
filter(starts_with("CA"))
train %>%
select(Ticket.starts_with("CA"))
## Embarked
train %>%
group_by(Embarked) %>%
summarise("count" = n())
train %>%
filter(Embarked = "")
train %>%
filter(Embarked == "")
train %>%
filter(Ticket == "113572")
train %>%
filter(Cabin == "B28")
train %>%
filter(Ticket == "113572")
test
union(train, test)
test$Survived <- -1
union(train, test)
test <- read.csv(".\\Data\\test.csv")
test_union <- test
test_union$Survived <- -1
union(train, test_union)
all <- union(train, test_union)
all
all
##################
# Data Wrangling #
##################
## Name
all %>%
distinct(Name)
## Age
all %>%
filter(!is.na(Age)) %>%
group_by(Sex) %>%
summarise(mean(Age))
all %>%
filter(!is.na(Age)) %>%
group_by(Pclass) %>%
summarise(mean(Age))
all %>%
filter(!is.na(Age)) %>%
group_by(Sex, Survived) %>%
summarise(mean(Age))
all %>%
filter(is.na(Age))
all %>%
filter(!is.na(Age)) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), binwidth = 3) +
ggtitle("Age distribution of passengers")
## Ticket
all %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
arrange(desc(total))
all %>%
filter(Ticket %in% c("1601", "347082", "CA. 2343")) %>%
arrange(Ticket)
## Embarked
all %>%
group_by(Embarked) %>%
summarise("count" = n())
all %>%
filter(Embarked == "")
##################
# Data Decisions #
##################
# Break up the passenger name into Title, Last Name and "Other Names"
all <- all %>%
separate(Name,c("LastName","Remaining"), sep = ", ", extra = "merge") %>%
separate(Remaining, c("Title", "OtherNames"), sep = ". ", extra = "merge")
library(tidyverse)
# Check working directory set correctly
#getwd()
#setwd("C:\\Users\\will.kent\\source\\repos\\R\\Machine Learning\\Kaggle\\Titanic")
# Read csv's
train <- read.csv(".\\Data\\train.csv")
test <- read.csv(".\\Data\\test.csv")
# Create test set for union with train set for data wrangling, make survived = -1 for completeness
test_union <- test
test_union$Survived <- -1
all <- union(train, test_union)
all
##################
# Data Wrangling #
##################
## Name
all %>%
distinct(Name)
# Last Name, Title, Given Names format
## Age
all %>%
filter(!is.na(Age)) %>%
group_by(Sex) %>%
summarise(mean(Age))
# Males slightly order, on average
all %>%
filter(!is.na(Age)) %>%
group_by(Pclass) %>%
summarise(mean(Age))
# Younger people in lower classes
all %>%
filter(!is.na(Age)) %>%
group_by(Sex, Survived) %>%
summarise(mean(Age))
# On average older females survived yet younger males survived
all %>%
filter(is.na(Age))
#94 records where Age = NA
all %>%
filter(!is.na(Age)) %>%
ggplot() +
geom_histogram(mapping = aes(x = Age), binwidth = 3) +
ggtitle("Age distribution of passengers")
# Mainly younger adults
## Ticket
all %>%
group_by(Ticket) %>%
summarise("total" = n()) %>%
arrange(desc(total))
# tickets are duplicated
all %>%
filter(Ticket %in% c("1601", "347082", "CA. 2343")) %>%
arrange(Ticket)
# Seems to be that families (or at least groups) were put on the same ticket
#### Does ticket prefix mean something?
## Embarked
all %>%
group_by(Embarked) %>%
summarise("count" = n())
# Some missing embarkation points
all %>%
filter(Embarked == "")
all %>%
filter(Ticket == "113572")
# No one else on the ticket
